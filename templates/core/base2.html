{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
  <link rel="icon" type="image/png" href="{% static 'img/favicon-32.png' %}">
  <link rel="stylesheet" href="{% static 'css/theme.css' %}">
  <link rel="stylesheet" href="https://cdn.materialdesignicons.com/5.3.45/css/materialdesignicons.min.css">

  {% block meta %}{% endblock meta %}

</head>

<body>
<div id="app">
  <b-navbar class="container" :close-on-click="false">
    <template slot="brand">
      <div class="navbar-item" style="padding-right:0">
        <nav class="breadcrumb" aria-label="breadcrumbs">
          <ul style="align-items:center;">
            <li><a href="{% url 'home' %}" class="is-active dh-a has-text-weight-semibold has-text-grey" aria-current="page">DRAFTHUB</a></li>
            {% block breadcrumb %}{% endblock breadcrumb %}
          </ul>
        </nav>
      </div>
    </template>
    <template slot="start">
      {% block start %}{% endblock start %}
    </template>
    <template slot="end">
      {% if user.is_authenticated %}
      <b-navbar-dropdown right label="{{ user.username }}" role="menu">
        <b-navbar-item href="{% url 'new' %}" role="menuitem">
          New article
        </b-navbar-item>
        <b-navbar-item href="{{ user.get_absolute_url }}" role="menuitem">
          Blog
        </b-navbar-item>
        <b-navbar-item href="{% url 'search' %}?q=favorites:" role="menuitem">
          Favorites
        </b-navbar-item>
        <hr class="dropdown-divider">
        <b-navbar-item href="{% url 'logout' %}?next={{ request.path }}" role="menuitem">
          Logout
        </b-navbar-item>
      </b-navbar-dropdown>
      {% else %}
      <div class="navbar-item">
        <b-button
          tag="a"
          href="{% url 'social:begin' 'github' %}?next={{ request.path }}"
          type="is-primary"
          size="is-small"
          icon-left="github">
          <strong>Sign in/up</strong>
        </b-button>
      </div>
      {% endif %}
    </template>
  </b-navbar>

  <div class="container is-flex mt-5">
    {% block container %}{% endblock %}
  </div>
  <div class="container is-flex mt-5">
    <main class="px-3" style="flex-grow:1;">
      {% block section %}{% endblock section %}
    </main>

    <aside class="px-3 is-hidden-mobile ml-5" style="width:25%;flex-shrink:0;">
      {% block aside %}{% endblock aside %}
    </aside>
  </div>

  <footer class="mt-6 footer">
    <div class="has-text-centered">
      <p>
        <a class="dh-a" target="_blank" href="https://github.com/drafthub/drafthub">drafthub</a> is an open-source project by <a class="dh-a" target="_blank" href="https://github.com/felipelincoln">Felipe Lincoln</a>
      </p>
    </div>
  </footer>

</div> <!-- app -->

  <script src="https://unpkg.com/vue"></script>
  <script src="https://unpkg.com/buefy/dist/buefy.min.js"></script>
  <script src="{% static 'js/vue.js' %}"></script>

</body>
</html>
